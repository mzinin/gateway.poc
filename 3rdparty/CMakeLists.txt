SET (FLATBUFFERS_BUILD_TESTS OFF)
SET (FLATBUFFERS_INSTALL OFF)
SET (FLATBUFFERS_STATIC_FLATC ON)
SET (FLATBUFFERS_BUILD_FLATHASH OFF)
SET (FLATBUFFERS_BUILD_CPP17 ON)
SET (FLATBUFFERS_SKIP_MONSTER_EXTRA ON)
SET (FLATBUFFERS_STRICT_MODE ON)
SET (FLATBUFFERS_CPP_STD 20)

ADD_SUBDIRECTORY (flatbuffers)

# remove some strict compiler flags for flatbuffers compiler, otherwise it won't compile
GET_TARGET_PROPERTY (FLATC_COMPILE_OPTIONS flatc COMPILE_OPTIONS)
LIST (REMOVE_ITEM FLATC_COMPILE_OPTIONS "-Wfloat-equal")
LIST (REMOVE_ITEM FLATC_COMPILE_OPTIONS "-Wredundant-decls")
SET_PROPERTY (TARGET flatc PROPERTY COMPILE_OPTIONS ${FLATC_COMPILE_OPTIONS})

# remove some strict compiler flags for flatbuffers library, otherwise it won't compile
GET_TARGET_PROPERTY (FLATBUFFERS_COMPILE_OPTIONS flatbuffers COMPILE_OPTIONS)
LIST (REMOVE_ITEM FLATBUFFERS_COMPILE_OPTIONS "-Wfloat-equal")
SET_PROPERTY (TARGET flatbuffers PROPERTY COMPILE_OPTIONS ${FLATBUFFERS_COMPILE_OPTIONS})


ADD_SUBDIRECTORY (nlohmann)

ADD_SUBDIRECTORY (tomlplusplus)
